<div class="giscus"></div>

<script is:inline>
// 动态加载以适应主题切换
function loadGiscus() {
  const theme = document.documentElement.classList.contains('dark') ? 'dark' : 'light';

  const script = document.createElement('script');
  script.src = 'https://giscus.app/client.js';
  script.setAttribute('data-repo', 'SwakinX/SwakinX.github.io');
  script.setAttribute('data-repo-id', 'R_kgDOPexSOw'); // 从giscus.app获取
  script.setAttribute('data-category', 'Announcements');
  script.setAttribute('data-category-id', 'DIC_kwDOPexSO84CuSs7');
  script.setAttribute('data-mapping', 'title');
  script.setAttribute('data-strict', '0')
  script.setAttribute('data-reactions-enabled', '1')
  script.setAttribute('data-emit-metadata', '0')
  script.setAttribute('data-input-position', 'top')
  script.setAttribute('data-theme', theme);
  script.setAttribute('data-lang', 'zh-CN');
  script.setAttribute('data-loading', 'lazy');
  script.setAttribute('crossorigin', 'anonymous');
  script.async = true;

  document.querySelector('.giscus').appendChild(script);
}

// 检测主题变化
const observer = new MutationObserver(loadGiscus);
observer.observe(document.documentElement, {
  attributes: true,
  attributeFilter: ['class']
});

window.addEventListener('load', loadGiscus);
</script>